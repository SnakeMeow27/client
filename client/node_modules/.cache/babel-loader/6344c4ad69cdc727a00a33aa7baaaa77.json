{"ast":null,"code":"import _slicedToArray from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{Button,Col,Container,Dropdown,Form,Modal,Row}from\"react-bootstrap\";import{Context}from\"../../index\";import app from\"../../App\";import{createApplication,createLicense,fetchApplications,fetchDate,fetchVersion}from\"../../http/deviceAPI\";import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateLicense=observer(function(_ref){var show=_ref.show,onHide=_ref.onHide;var _useContext=useContext(Context),application=_useContext.application;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),apps=_useState4[0],setApps=_useState4[1];useEffect(function(){fetchVersion().then(function(data){return application.setVersion(data);});fetchDate().then(function(data){return application.setDate(data);});},[]);var addLicense=function addLicense(){var formData=new FormData();formData.append('licenseApp',name);formData.append('applicationId',apps);formData.append('VersionId',application.selectedVersion.id);formData.append('DateOfActionId',application.selectedDate.id);createLicense(formData).then(function(data){return onHide();});};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043B\\u0438\\u0446\\u0435\\u043D\\u0437\\u0438\\u044E\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Form.Control,{value:apps,onChange:function onChange(e){return setApps(e.target.value);},className:\"mt-2\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{className:\"btn-secondary\",children:application.selectedDate.name||\"Выберите время действия\"}),/*#__PURE__*/_jsx(Dropdown.Menu,{children:application.dates.map(function(date){return/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return application.setSelectedDate(date);},children:date.name},date.id);})})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{className:\"btn-secondary\",children:application.selectedVersion.name||\"Выберите версию\"}),/*#__PURE__*/_jsx(Dropdown.Menu,{children:application.versions.map(function(version){return/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return application.setSelectedVersion(version);},children:version.name},version.id);})})]})})]})}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},className:\"mt-2\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043B\\u0438\\u0446\\u0435\\u043D\\u0437\\u0438\\u0438\"})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:onHide,children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:addLicense,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]});});export default CreateLicense;","map":{"version":3,"names":["React","useContext","useEffect","useState","Button","Col","Container","Dropdown","Form","Modal","Row","Context","app","createApplication","createLicense","fetchApplications","fetchDate","fetchVersion","observer","CreateLicense","show","onHide","application","name","setName","apps","setApps","then","data","setVersion","setDate","addLicense","formData","FormData","append","selectedVersion","id","selectedDate","e","target","value","dates","map","date","setSelectedDate","versions","version","setSelectedVersion"],"sources":["C:/Users/danak/WebstormProjects/untitled/client/src/components/modals/CreateLicense.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {Button, Col, Container, Dropdown, Form, Modal, Row} from \"react-bootstrap\";\r\nimport {Context} from \"../../index\";\r\nimport app from \"../../App\";\r\nimport {\r\n    createApplication, createLicense,\r\n    fetchApplications,\r\n    fetchDate,\r\n    fetchVersion\r\n} from \"../../http/deviceAPI\";\r\nimport {observer} from \"mobx-react-lite\";\r\n\r\nconst CreateLicense = observer(({show, onHide}) => {\r\n    const {application} = useContext(Context)\r\n    const [name, setName] = useState('')\r\n    const [apps, setApps] = useState('')\r\n\r\n\r\n    useEffect(() => {\r\n        fetchVersion().then(data=> application.setVersion(data))\r\n        fetchDate().then(data=> application.setDate(data))\r\n    }, [])\r\n\r\n    const addLicense = () => {\r\n        const formData = new FormData()\r\n        formData.append('licenseApp', name)\r\n        formData.append('applicationId', apps)\r\n        formData.append('VersionId', application.selectedVersion.id)\r\n        formData.append('DateOfActionId', application.selectedDate.id)\r\n\r\n        createLicense(formData).then(data => onHide())\r\n\r\n    }\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            onHide={onHide}\r\n            centered\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                    Добавить лицензию\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n\r\n                    <Form.Control\r\n                        value={apps}\r\n                        onChange={e => setApps(e.target.value)}\r\n                        className=\"mt-2\"\r\n                        placeholder=\"Введите код приложения\">\r\n                    </Form.Control>\r\n\r\n                    <Container>\r\n                        <Row>\r\n                            <Col>\r\n                                <Dropdown>\r\n                                    <Dropdown.Toggle  className={\"btn-secondary\"}>{application.selectedDate.name || \"Выберите время действия\"}</Dropdown.Toggle>\r\n                                    <Dropdown.Menu>\r\n                                        {application.dates.map(date =>\r\n                                            <Dropdown.Item onClick={() => application.setSelectedDate(date)}\r\n                                                           key={date.id}\r\n                                            >\r\n                                                {date.name}\r\n                                            </Dropdown.Item>\r\n                                        )}\r\n                                    </Dropdown.Menu>\r\n                                </Dropdown>\r\n                            </Col>\r\n                            <Col>\r\n                                <Dropdown>\r\n                                    <Dropdown.Toggle  className={\"btn-secondary\"}>{application.selectedVersion.name || \"Выберите версию\"}</Dropdown.Toggle>\r\n                                    <Dropdown.Menu>\r\n                                        {application.versions.map(version =>\r\n                                            <Dropdown.Item onClick={() => application.setSelectedVersion(version)}\r\n                                                           key={version.id}\r\n                                            >\r\n                                                {version.name}\r\n                                            </Dropdown.Item>\r\n                                        )}\r\n                                    </Dropdown.Menu>\r\n                                </Dropdown>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n\r\n                    <Form.Control\r\n                        value={name}\r\n                        onChange={e => setName(e.target.value)}\r\n                        className=\"mt-2\"\r\n                        placeholder=\"Введите название лицензии\">\r\n                    </Form.Control>\r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"outline-danger\" onClick={onHide}>Закрыть</Button>\r\n                <Button variant=\"outline-success\" onClick={addLicense}>Добавить</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n});\r\n\r\nexport default CreateLicense;"],"mappings":"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"},"metadata":{},"sourceType":"module"}