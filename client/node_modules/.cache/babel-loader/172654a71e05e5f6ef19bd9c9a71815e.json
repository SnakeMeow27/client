{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Button,Dropdown,Modal}from\"react-bootstrap\";import{deleteDelevoper,deleteType,fetchDevelopers,fetchTypes}from\"../../http/deviceAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DeleteBrandOrType=function DeleteBrandOrType(_ref){var show=_ref.show,onHide=_ref.onHide,showSuccessMsgFunc=_ref.showSuccessMsgFunc;var _useState=useState(\"Разработчик\"),_useState2=_slicedToArray(_useState,2),developerOrType=_useState2[0],setDeveloperOrType=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),developers=_useState4[0],setDevelopers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),types=_useState6[0],setTypes=_useState6[1];var _useState7=useState({name:\"Разработчик не выбран\"}),_useState8=_slicedToArray(_useState7,2),selectDeveloper=_useState8[0],setSelectDeveloper=_useState8[1];var _useState9=useState({name:\"Тип не выбран\"}),_useState10=_slicedToArray(_useState9,2),selectType=_useState10[0],setSelectType=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showMsgErr=_useState12[0],setShowMsgErr=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),msgErr=_useState14[0],setMsgErr=_useState14[1];useEffect(function(){fetchTypes().then(function(data){return setTypes(data);});fetchDevelopers().then(function(data){return setDevelopers(data);});},[]);var Delete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(developerOrType===\"Разработчик\")){_context.next=10;break;}if(!(selectDeveloper.name!==\"Разработчик не выбран\")){_context.next=6;break;}_context.next=4;return deleteDelevoper(selectDeveloper.id).then(function(data){showSuccessMsgFunc(data);onHide();setSelectDeveloper({name:\"Разработчик не выбран\"});});case 4:_context.next=8;break;case 6:setMsgErr(\"Пожалуйста, выберите Разработчика\");setShowMsgErr(true);case 8:_context.next=17;break;case 10:if(!(selectType.name!==\"Тип не выбран\")){_context.next=15;break;}_context.next=13;return deleteType(selectType.id).then(function(data){showSuccessMsgFunc(data);onHide();setSelectType({name:\"Тип не выбран\"});});case 13:_context.next=17;break;case 15:setMsgErr(\"Пожалуйста, выберите тип\");setShowMsgErr(true);case 17:case\"end\":return _context.stop();}}},_callee);}));return function Delete(){return _ref2.apply(this,arguments);};}();useEffect(function(){return setShowMsgErr(false);},[selectType,selectDeveloper,developerOrType]);return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,size:\"lg\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u0423\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u0438\\u043F\\u0430 \\u0438\\u043B\\u0438 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A\\u0430\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[showMsgErr&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"center\"},children:msgErr})}),\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E:\",/*#__PURE__*/_jsxs(Dropdown,{className:\"mb-3\",style:{margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"dark\",id:\"dropdown-basic\",children:developerOrType}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[developerOrType===\"Разработчик\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"\\u0420\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setDeveloperOrType(\"Разработчик\");},children:\"\\u0420\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A\"}),developerOrType===\"Тип\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"\\u0422\\u0438\\u043F\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setDeveloperOrType(\"Тип\");},children:\"\\u0422\\u0438\\u043F\"})]})]}),\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442 \\u0438\\u0437 \",developerOrType===\"Разработчик\"?\"Разработчик\":\"Тип\",/*#__PURE__*/_jsxs(Dropdown,{className:\"mb-3\",style:{margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"dark\",id:\"dropdown-basic\",children:developerOrType===\"Разработчик\"?selectDeveloper.name:selectType.name}),/*#__PURE__*/_jsx(Dropdown.Menu,{children:developerOrType===\"Разработчик\"?developers.map(function(_ref3){var id=_ref3.id,name=_ref3.name;return selectDeveloper.name===name?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:name},id):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setSelectDeveloper({id:id,name:name});},children:name},id);}):types.map(function(_ref4){var id=_ref4.id,name=_ref4.name;return selectType.name===name?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:name},id):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setSelectType({id:id,name:name});},children:name},id);})})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:onHide,children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:Delete,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]});};export default DeleteBrandOrType;","map":{"version":3,"names":["React","useEffect","useState","Button","Dropdown","Modal","deleteDelevoper","deleteType","fetchDevelopers","fetchTypes","DeleteBrandOrType","show","onHide","showSuccessMsgFunc","developerOrType","setDeveloperOrType","developers","setDevelopers","types","setTypes","name","selectDeveloper","setSelectDeveloper","selectType","setSelectType","showMsgErr","setShowMsgErr","msgErr","setMsgErr","then","data","Delete","id","color","textAlign","margin","map"],"sources":["C:/Users/danak/WebstormProjects/untitled/client/src/components/modals/DeleteDeveloperOrType.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Button, Dropdown, Modal} from \"react-bootstrap\";\r\nimport {deleteDelevoper, deleteType, fetchDevelopers, fetchTypes} from \"../../http/deviceAPI\";\r\n\r\nconst DeleteBrandOrType = ({show, onHide, showSuccessMsgFunc}) => {\r\n    const [developerOrType, setDeveloperOrType] = useState(\"Разработчик\");\r\n    const [developers, setDevelopers] = useState([]);\r\n    const [types, setTypes] = useState([]);\r\n    const [selectDeveloper, setSelectDeveloper] = useState({name: \"Разработчик не выбран\"});\r\n    const [selectType, setSelectType] = useState({name: \"Тип не выбран\"});\r\n    const [showMsgErr, setShowMsgErr] = useState(false);\r\n    const [msgErr, setMsgErr] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchTypes().then(data => setTypes(data));\r\n        fetchDevelopers().then(data => setDevelopers(data));\r\n    }, []);\r\n\r\n    const Delete = async () => {\r\n        if(developerOrType === \"Разработчик\") {\r\n            if(selectDeveloper.name !== \"Разработчик не выбран\") {\r\n                await deleteDelevoper(selectDeveloper.id).then(data => {\r\n                    showSuccessMsgFunc(data);\r\n                    onHide();\r\n                    setSelectDeveloper({name: \"Разработчик не выбран\"});\r\n                });\r\n            } else {\r\n                setMsgErr(\"Пожалуйста, выберите Разработчика\");\r\n                setShowMsgErr(true);\r\n            }\r\n        } else {\r\n            if(selectType.name !== \"Тип не выбран\") {\r\n                await deleteType(selectType.id).then(data => {\r\n                    showSuccessMsgFunc(data);\r\n                    onHide();\r\n                    setSelectType({name: \"Тип не выбран\"});\r\n                });\r\n            } else {\r\n                setMsgErr(\"Пожалуйста, выберите тип\");\r\n                setShowMsgErr(true);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => setShowMsgErr(false), [selectType, selectDeveloper, developerOrType])\r\n\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            onHide={onHide}\r\n            size=\"lg\"\r\n            centered\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>\r\n                    Удаление типа или разработчика\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {showMsgErr &&\r\n                    <>\r\n                        <p style={{color: \"red\", textAlign: \"center\"}}>{msgErr}</p>\r\n                    </>\r\n                }\r\n\r\n                Выберите категорию:\r\n                <Dropdown className=\"mb-3\" style={{margin: \"0 auto\"}}>\r\n                    <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                        {developerOrType}\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu>\r\n                        {developerOrType === \"Разработчик\" ? <Dropdown.Item disabled>Разработчик</Dropdown.Item> : <Dropdown.Item onClick={() => setDeveloperOrType(\"Разработчик\")}>Разработчик</Dropdown.Item>}\r\n                        {developerOrType === \"Тип\" ? <Dropdown.Item disabled>Тип</Dropdown.Item> : <Dropdown.Item onClick={() => setDeveloperOrType(\"Тип\")}>Тип</Dropdown.Item>}\r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n\r\n                Выберите элемент из {developerOrType === \"Разработчик\" ? \"Разработчик\" : \"Тип\"}\r\n                <Dropdown className=\"mb-3\" style={{margin: \"0 auto\"}}>\r\n                    <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                        {developerOrType === \"Разработчик\" ? selectDeveloper.name : selectType.name}\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu>\r\n                        {developerOrType === \"Разработчик\" ?\r\n                            developers.map(({id, name}) =>\r\n                                selectDeveloper.name === name ? <Dropdown.Item disabled key={id}>{name}</Dropdown.Item> : <Dropdown.Item  key={id} onClick={() => setSelectDeveloper({id, name})}>{name}</Dropdown.Item>\r\n                            )\r\n                            :\r\n                            types.map(({id, name}) =>\r\n                                selectType.name === name ? <Dropdown.Item disabled  key={id}>{name}</Dropdown.Item> : <Dropdown.Item  key={id} onClick={() => setSelectType({id, name})}>{name}</Dropdown.Item>\r\n                            )\r\n                        }\r\n\r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n\r\n\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"outline-danger\" onClick={onHide}>Закрыть</Button>\r\n                <Button variant=\"outline-success\" onClick={Delete}>Удалить</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default DeleteBrandOrType;"],"mappings":"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"},"metadata":{},"sourceType":"module"}