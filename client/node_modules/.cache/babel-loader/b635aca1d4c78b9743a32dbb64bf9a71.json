{"ast":null,"code":"import _slicedToArray from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Col,Container,Dropdown,ListGroup,Pagination,Row,Spinner}from\"react-bootstrap\";import{fetchOrders}from\"../http/ordersAPI\";import ItemOneOrderInAdmin from\"../components/itemOneorderInAdmin\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Orders=function Orders(){var _orders$rows;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var _useState9=useState(\"All\"),_useState10=_slicedToArray(_useState9,2),filter=_useState10[0],setFilter=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),rerender=_useState12[0],setRerender=_useState12[1];//pagination\nvar limit=5;var pageCount=Math.ceil(Number(count)/limit);var pages=[];useEffect(function(){fetchOrders({limit:limit,page:1}).then(function(data){setOrders(data);setLoading(false);setCount(data.count);});},[]);useEffect(function(){setLoading(true);fetchOrders({limit:limit,page:currentPage}).then(function(data){setOrders(data);setLoading(false);});},[currentPage]);useEffect(function(){setLoading(true);fetchOrders({limit:limit,page:1,complete:filter}).then(function(data){setOrders(data);setLoading(false);setCount(data.count);setCurrentPage(1);});},[filter]);//re-render after change status, or delete some order\nuseEffect(function(){setLoading(true);fetchOrders({limit:limit,page:currentPage,complete:filter}).then(function(data){setOrders(data);setLoading(false);setCount(data.count);setCurrentPage(1);});},[rerender]);var reRender=function reRender(){setRerender(!rerender);};if(loading){return/*#__PURE__*/_jsx(Spinner,{animation:\"grow\"});}var _loop=function _loop(number){pages.push(/*#__PURE__*/_jsx(Pagination.Item,{active:number===currentPage,onClick:function onClick(){return setCurrentPage(number);},children:number},number));};for(var number=1;number<pageCount+1;number++){_loop(number);}return/*#__PURE__*/_jsxs(Container,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,className:\"mt-3 d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3\",children:\"Filter:\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\",children:filter}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[filter===\"all\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"All\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setFilter(\"all\");},children:\"All\"}),filter===\"completed\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"Completed\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setFilter(\"completed\");},children:\"Completed\"}),filter===\"not-completed\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"Not Completed\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setFilter(\"not-completed\");},children:\"Not Completed\"})]})]})]})}),/*#__PURE__*/_jsx(ListGroup,{children:(_orders$rows=orders.rows)===null||_orders$rows===void 0?void 0:_orders$rows.map(function(_ref){var id=_ref.id,complete=_ref.complete,mobile=_ref.mobile,createdAt=_ref.createdAt,updatedAt=_ref.updatedAt,userId=_ref.userId;return/*#__PURE__*/_jsx(ItemOneOrderInAdmin,{id:id,complete:complete,mobile:mobile,createdAt:createdAt,updatedAt:updatedAt,userId:userId,reRender:reRender},id);})}),/*#__PURE__*/_jsx(Pagination,{size:\"sm\",className:\"mt-4 mb-4\",style:{margin:\"0 auto\"},children:pages})]});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","Col","Container","Dropdown","ListGroup","Pagination","Row","Spinner","fetchOrders","ItemOneOrderInAdmin","Orders","loading","setLoading","orders","setOrders","currentPage","setCurrentPage","count","setCount","filter","setFilter","rerender","setRerender","limit","pageCount","Math","ceil","Number","pages","page","then","data","complete","reRender","number","push","rows","map","id","mobile","createdAt","updatedAt","userId","margin"],"sources":["C:/Users/danak/WebstormProjects/untitled/client/src/pages/Orders.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Col, Container, Dropdown, ListGroup, Pagination, Row, Spinner} from \"react-bootstrap\";\r\nimport {fetchOrders} from \"../http/ordersAPI\";\r\nimport ItemOneOrderInAdmin from \"../components/itemOneorderInAdmin\";\r\n\r\nconst Orders = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [orders, setOrders] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [count, setCount] = useState(0);\r\n    const [filter, setFilter] = useState(\"All\");\r\n    const [rerender, setRerender] = useState(false);\r\n\r\n    //pagination\r\n    const limit = 5;\r\n    const pageCount = Math.ceil(Number(count) / limit);\r\n    const pages = [];\r\n\r\n    useEffect(() => {\r\n        fetchOrders({limit, page: 1}).then(data => {\r\n            setOrders(data);\r\n            setLoading(false);\r\n            setCount(data.count);\r\n        })\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        fetchOrders({limit, page: currentPage}).then(data => {\r\n            setOrders(data);\r\n            setLoading(false);\r\n        })\r\n    }, [currentPage]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        fetchOrders({limit, page: 1, complete: filter}).then(data => {\r\n            setOrders(data);\r\n            setLoading(false);\r\n            setCount(data.count);\r\n            setCurrentPage(1);\r\n        })\r\n    }, [filter]);\r\n\r\n    //re-render after change status, or delete some order\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        fetchOrders({limit, page: currentPage, complete: filter}).then(data => {\r\n            setOrders(data);\r\n            setLoading(false);\r\n            setCount(data.count);\r\n            setCurrentPage(1);\r\n        })\r\n    }, [rerender]);\r\n\r\n    const reRender = () => {\r\n        setRerender(!rerender);\r\n    }\r\n\r\n    if(loading) {\r\n        return <Spinner animation=\"grow\"/>\r\n    }\r\n\r\n    for (let number = 1; number < pageCount + 1; number++) {\r\n        pages.push(\r\n            <Pagination.Item key={number} active={number === currentPage} onClick={() => setCurrentPage(number)}>\r\n                {number}\r\n            </Pagination.Item>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container className=\"d-flex flex-column\">\r\n            <Row>\r\n                <Col xs={12} className=\"mt-3 d-flex justify-content-center align-items-center\">\r\n                    <div className=\"mr-3\">Filter:</div>\r\n                    <Dropdown>\r\n                        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\r\n                            {filter}\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            {filter === \"all\" ? <Dropdown.Item disabled>All</Dropdown.Item> : <Dropdown.Item onClick={() => setFilter(\"all\")}>All</Dropdown.Item>}\r\n                            {filter === \"completed\" ? <Dropdown.Item disabled>Completed</Dropdown.Item> : <Dropdown.Item onClick={() => setFilter(\"completed\")}>Completed</Dropdown.Item>}\r\n                            {filter === \"not-completed\" ? <Dropdown.Item disabled>Not Completed</Dropdown.Item> : <Dropdown.Item onClick={() => setFilter(\"not-completed\")}>Not Completed</Dropdown.Item>}\r\n                          </Dropdown.Menu>\r\n                    </Dropdown>\r\n                </Col>\r\n            </Row>\r\n            <ListGroup>\r\n                {orders.rows?.map( ({id, complete, mobile, createdAt, updatedAt, userId}) =>\r\n                    <ItemOneOrderInAdmin\r\n                        key={id}\r\n                        id={id}\r\n                        complete={complete}\r\n                        mobile={mobile}\r\n                        createdAt={createdAt}\r\n                        updatedAt={updatedAt}\r\n                        userId={userId}\r\n                        reRender={reRender}/>)}\r\n            </ListGroup>\r\n            <Pagination size=\"sm\" className=\"mt-4 mb-4\" style={{margin: \"0 auto\"}}>\r\n                {pages}\r\n            </Pagination>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Orders;"],"mappings":"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"},"metadata":{},"sourceType":"module"}