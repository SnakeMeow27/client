{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/danak/WebstormProjects/untitled/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\danak\\\\WebstormProjects\\\\untitled\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useContext,useState}from'react';import{Card,Container,Form,Row}from\"react-bootstrap\";import{Button}from\"react-bootstrap\";import{NavLink,useLocation,useNavigate}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHOP_ROUTE}from\"../utils/consts\";import{login,registration}from\"../http/userAPI\";import{observer}from\"mobx-react-lite\";import{Context}from\"../index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=observer(function(){var _useContext=useContext(Context),user=_useContext.user;var location=useLocation();var history=useNavigate();var isLogin=location.pathname===LOGIN_ROUTE;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLogin){_context.next=7;break;}_context.next=4;return login(email,password);case 4:data=_context.sent;_context.next=10;break;case 7:_context.next=9;return registration(email,password);case 9:data=_context.sent;case 10:user.setUser(user);user.setIsAuth(true);history(SHOP_ROUTE);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{height:window.innerHeight-54},children:/*#__PURE__*/_jsxs(Card,{style:{width:600},className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"n-auto\",children:isLogin?'Авторизация':'Регистрация'}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\"}),/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-between mt-3 pl-3 pr-3\",children:[isLogin?/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \",/*#__PURE__*/_jsx(NavLink,{to:REGISTRATION_ROUTE,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0441\\u044F!\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0415\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \",/*#__PURE__*/_jsx(NavLink,{to:LOGIN_ROUTE,children:\"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435!\"})]}),/*#__PURE__*/_jsx(Button,{onClick:click,variant:\"outline-dark\",children:isLogin?'Войти':'Регистрация'})]})]})]})});});export default Auth;","map":{"version":3,"names":["React","useContext","useState","Card","Container","Form","Row","Button","NavLink","useLocation","useNavigate","LOGIN_ROUTE","REGISTRATION_ROUTE","SHOP_ROUTE","login","registration","observer","Context","Auth","user","location","history","isLogin","pathname","email","setEmail","password","setPassword","click","data","setUser","setIsAuth","alert","response","message","height","window","innerHeight","width","e","target","value"],"sources":["C:/Users/danak/WebstormProjects/untitled/client/src/pages/Auth.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Card, Container, Form, Row} from \"react-bootstrap\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {NavLink, useLocation, useNavigate} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE} from \"../utils/consts\";\r\nimport {login, registration} from \"../http/userAPI\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {Context} from \"../index\";\r\n\r\nconst Auth = observer(() => {\r\n   const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const  history = useNavigate()\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const click = async() => {\r\n\r\n       try{\r\n           let data;\r\n           if(isLogin)\r\n           {\r\n               data = await login(email, password)\r\n           }\r\n           else {\r\n               data  = await registration(email, password)\r\n           }\r\n           user.setUser(user)\r\n           user.setIsAuth(true)\r\n           history(SHOP_ROUTE)\r\n\r\n       }\r\n       catch (e) {\r\n      alert(e.response.data.message)\r\n       }\r\n\r\n    }\r\n    return (\r\n        <Container\r\n        className=\"d-flex justify-content-center align-items-center\"\r\n        style={{height: window.innerHeight - 54}}\r\n        >\r\n         <Card style={{width:600}} className=\"p-5\">\r\n             <h2 className=\"n-auto\">{isLogin ? 'Авторизация' : 'Регистрация'}</h2>\r\n             <Form className=\"d-flex flex-column\">\r\n             <Form.Control\r\n             className=\"mt-3\"\r\n             placeholder=\"Введите ваш email...\"\r\n             value={email}\r\n             onChange={e=> setEmail(e.target.value)}\r\n             />\r\n                 <Form.Control\r\n                     className=\"mt-3\"\r\n                     placeholder=\"Введите ваш пароль...\"\r\n                     value={password}\r\n                     onChange={e=> setPassword(e.target.value)}\r\n                     type=\"password\"\r\n                 />\r\n                 <Row className=\"d-flex justify-content-between mt-3 pl-3 pr-3\">\r\n                     {isLogin ?\r\n                         <div>\r\n                             Нет аккаунта? <NavLink to={REGISTRATION_ROUTE}>Зарегистрируйся!</NavLink>\r\n                         </div>\r\n                         :\r\n                         <div>\r\n                             Есть аккаунт? <NavLink to={LOGIN_ROUTE}>Войдите!</NavLink>\r\n                         </div>\r\n                     }\r\n                     <Button\r\n                         onClick={click}\r\n                         variant={\"outline-dark\"}>\r\n                         {isLogin ? 'Войти' : 'Регистрация'}\r\n                     </Button>\r\n                 </Row>\r\n             </Form>\r\n         </Card>\r\n\r\n        </Container>\r\n    );\r\n});\r\n\r\nexport default Auth;"],"mappings":"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"},"metadata":{},"sourceType":"module"}